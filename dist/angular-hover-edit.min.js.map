{"version":3,"sources":["angular-hover-edit-dx.js","angular-hover-edit-dx.min.js"],"names":["angular","module","directive","$animate","$compile","priority","restrict","require","scope","saveFn","addFn","cancelFn","unitToSave","editMode","formName","readOnly","transclude","template","link","element","attrs","ctrls","triggerhoverAnimation","leaving","on","outerBox","children","addClass","removeClass","showIcon","setEditMode","addMode","_","isFunction","save","form","document","getElementById","hasClass","showSpinner","then","hideEditElements","showMessage","success","cancel","setupElements","editBox","after","addIcon","hasPermissions","append","elemIcon","saveSpinner","saveExitIcons","$watch","nv","ov","remove","functions","className","$"],"mappings":"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","file":"angular-hover-edit.min.js","sourcesContent":["/**\n * Created by ericjohndixon on 7/29/15.\n */\n// Code goes here\n(function () {\n    'use strict';\n\n    angular.module('angularHoverEdit', [])\n        .directive('hoverEdit', ['$animate', '$compile', function ($animate, $compile) {\n            return {\n                priority: 100,\n                restrict: 'EA',\n                require: ['?hoverEditPermissions', '?messageService'],\n                scope: {\n                    saveFn: '=?saveFn',\n                    addFn: '=?addFn',\n                    cancelFn: '=?cancelFn',\n                    unitToSave: '=?unitToSave',\n                    editMode: '=?editMode', //external trigger\n                    formName: '@formName',\n                    readOnly: '=?readOnly'\n                },\n                transclude: true,\n                template: '<div class=\"animated-element edit-container\" ' +\n                'ng-mouseover=\"(!editMode.on) ? triggerhoverAnimation(false) : \\'\\'\" ' +\n                'ng-mouseleave=\"(!editMode.on) ? triggerhoverAnimation(true) : \\'\\'\" ' +\n                'ng-click=\"setEditMode()\"ng-transclude></div>',\n                link: function (scope, element, attrs, ctrls) {\n                    var elemIcon = angular.element('<span class=\"top-rt-corner-box\"><i class=\"lds-icon lds-icon-pencil\"></i></span>');\n                    var saveExitIcons = angular.element('<div class=\"save-exit-btns\">'+\n                        '<button class=\"btn btn-danger-hover\" ng-disabled=\"showSpinner\" ng-show=\"editMode.on\" ng-click=\"functions.cancel()\" tooltip-popup-delay=\"500\" tooltip-append-to-body=\"true\" tooltip=\"Cancel Changes\" style=\"float: right\">CANCEL</button>' +\n                        '<button class=\"btn btn-success-hover\" ng-disabled=\"showSpinner\" type=\"submit\" form=\"{{formName}}\" ng-show=\"editMode.on\" ng-click=\"functions.save()\" tooltip-popup-delay=\"500\" tooltip-append-to-body=\"true\" tooltip=\"Save Changes\" style=\"float: right;margin-right: 2px\">SAVE</button>' +\n\n                        '</div>');\n                    var addIcon = angular.element('<button class=\"margin-bot-5 btn btn-default add-btn add-restriction\" ng-show=\"editMode.on\" ng-click=\"setEditMode(true)\" tooltip-popup-delay=\"500\" tooltip-append-to-body=\"true\" tooltip=\"Add Restriction\"><i class=\"lds-icon lds-icon-add\"></i> </button>');\n                    var saveSpinner = angular.element('<div class=\"hover-edit-spinner\" ng-show=\"showSpinner\"><util-spinner></util-spinner></div>');\n\n\n                    var editBox = element.children('.editContainer');\n\n                    scope.$watch('readOnly', function(nv, ov) {\n                        if (nv != ov) {\n                            if (nv) {\n                                scope.triggerhoverAnimation = null;\n                                scope.setEditMode = null;\n                                elemIcon.remove();\n                            } else {\n                                if(!ctrls[0] || ctrls[0].hasPermissions) {\n                                    scope.triggerhoverAnimation = triggerhoverAnimation;\n                                    scope.setEditMode = setEditMode;\n                                    editBox.append(elemIcon);\n                                    $compile(elemIcon)(scope);\n                                }\n                            }\n                        }\n                    });\n\n                    if(!scope.readOnly && (!ctrls[0] || ctrls[0].hasPermissions)) {\n                        scope.triggerhoverAnimation = triggerhoverAnimation;\n                        scope.setEditMode = setEditMode;\n                    }\n\n                    scope.functions = {\n                        save: save,\n                        cancel: cancel\n                    };\n                    //scope.cancel = cancel;\n\n                    setupElements();\n                    scope.editMode = { on : false};\n                    scope.showIcon = false;\n                    scope.showSpinner = false;\n\n                    //trigger hover animation for mouseover(leaving = false) or mouseleaving (leaving = true)\n                    function triggerhoverAnimation(leaving) {\n                        if (!scope.editMode.on) {\n                            //var outerBox = document.querySelector(\"#editContainer\");\n                            var outerBox = element.children('.editContainer')[0];\n\n                            if (outerBox !== null)\n                            {\n                                outerBox = angular.element(outerBox);\n\n                                if (leaving) {\n                                    $animate.addClass(outerBox, 'edit-box');\n                                    $animate.removeClass(outerBox, 'box-border');\n                                    scope.showIcon = false;\n\n                                }\n                                else {\n                                    $animate.addClass(outerBox, 'box-border');\n                                    $animate.removeClass(outerBox, 'edit-box');\n                                    scope.showIcon = true;\n                                }\n                            }\n                        }\n                    }\n\n\n                    // clicking box for editing\n                    function setEditMode (addMode) {\n                        if(addMode && _.isFunction(scope.addFn())) {\n                            scope.addFn();\n                        }\n                        var outerBox = element.children('.editContainer');\n                        scope.editMode.on = true;\n                        $animate.removeClass(element, 'disabled');\n                        $animate.addClass(outerBox, 'box-border');\n                        $animate.removeClass(outerBox, 'edit-box');\n                    }\n\n                    //Save Icon Click\n                    function save() {\n                        //if there is a form associated with the element\n                        var form = angular.element(document.getElementById(scope.formName));\n\n                        //Only able to save if form is valid\n                        if (!form || !form.hasClass('ng-invalid')) {\n                            if (_.isFunction(scope.saveFn)) {\n                                scope.showSpinner = true;\n                                scope.saveFn(scope.unitToSave).then(function () {\n                                    scope.showSpinner = false;\n                                    //$compile(saveExitIcons)(scope);\n                                    scope.editMode.on = false;\n                                    hideEditElements();\n\n                                    if(ctrls[1]) {\n                                        ctrls[1].showMessage.success('')('Save Successful');\n                                    }\n                                }).catch(function() {\n                                    scope.showSpinner = false;\n                                });\n                            } else {\n                                scope.editMode.on = false;\n                                hideEditElements();\n                            }\n                        }\n\n                    }\n\n                    //Cancel Icon Click\n                    function cancel() {\n                        scope.editMode.on = false;\n                        if(_.isFunction(scope.cancelFn)) {\n                            scope.cancelFn();\n                        }\n                        hideEditElements();\n                    }\n\n                    // initial creation of elements\n                    function setupElements() {\n                        if(_.isFunction(scope.addFn)) {\n                            editBox.after(addIcon);\n                            $compile(addIcon)(scope);\n                        }\n                        if (!scope.readOnly && (!ctrls[0] || ctrls[0].hasPermissions)) {\n                            editBox.append(elemIcon);\n                            $compile(elemIcon)(scope);\n                        }\n                        if(!ctrls[0] || ctrls[0].hasPermissions) {\n                            editBox.after(saveSpinner);\n                            editBox.after(saveExitIcons);\n                            $compile(saveSpinner)(scope);\n                            $compile(saveExitIcons)(scope);\n                        }\n\n                        editBox.addClass('edit-box');\n                        element.addClass('disabled');\n                    }\n\n                    function hideEditElements() {\n                        triggerhoverAnimation(true);\n                        element.addClass('disabled');\n                    }\n                }\n            };\n        }])\n        .directive('utilSpinner', [function () {\n            return {\n                restrict: 'E',\n                template: '<span us-spinner=\"{radius:4, width:2, length: 2, lines: 9, scale: 1.5, corners: 1.0, speed: 2.0, hwaccel: true, trail: 100, className: className}\"></span>',\n                scope: {\n                    className: '@className'\n                }\n            };\n\n        }]);\n\n})();\n","(function(){\"use strict\";angular.module(\"angularHoverEdit\",[]).directive(\"hoverEdit\",[\"$animate\",\"$compile\",function($animate,$compile){return{priority:100,restrict:\"EA\",require:[\"?hoverEditPermissions\",\"?messageService\"],scope:{saveFn:\"=?saveFn\",addFn:\"=?addFn\",cancelFn:\"=?cancelFn\",unitToSave:\"=?unitToSave\",editMode:\"=?editMode\",formName:\"@formName\",readOnly:\"=?readOnly\"},transclude:true,template:'<div class=\"animated-element edit-container\" '+\"ng-mouseover=\\\"(!editMode.on) ? triggerhoverAnimation(false) : ''\\\" \"+\"ng-mouseleave=\\\"(!editMode.on) ? triggerhoverAnimation(true) : ''\\\" \"+'ng-click=\"setEditMode()\"ng-transclude></div>',link:function(scope,element,attrs,ctrls){var elemIcon=angular.element('<span class=\"top-rt-corner-box\"><i class=\"lds-icon lds-icon-pencil\"></i></span>');var saveExitIcons=angular.element('<div class=\"save-exit-btns\">'+'<button class=\"btn btn-danger-hover\" ng-disabled=\"showSpinner\" ng-show=\"editMode.on\" ng-click=\"functions.cancel()\" tooltip-popup-delay=\"500\" tooltip-append-to-body=\"true\" tooltip=\"Cancel Changes\" style=\"float: right\">CANCEL</button>'+'<button class=\"btn btn-success-hover\" ng-disabled=\"showSpinner\" type=\"submit\" form=\"{{formName}}\" ng-show=\"editMode.on\" ng-click=\"functions.save()\" tooltip-popup-delay=\"500\" tooltip-append-to-body=\"true\" tooltip=\"Save Changes\" style=\"float: right;margin-right: 2px\">SAVE</button>'+\"</div>\");var addIcon=angular.element('<button class=\"margin-bot-5 btn btn-default add-btn add-restriction\" ng-show=\"editMode.on\" ng-click=\"setEditMode(true)\" tooltip-popup-delay=\"500\" tooltip-append-to-body=\"true\" tooltip=\"Add Restriction\"><i class=\"lds-icon lds-icon-add\"></i> </button>');var saveSpinner=angular.element('<div class=\"hover-edit-spinner\" ng-show=\"showSpinner\"><util-spinner></util-spinner></div>');var editBox=element.children(\".editContainer\");scope.$watch(\"readOnly\",function(nv,ov){if(nv!=ov){if(nv){scope.triggerhoverAnimation=null;scope.setEditMode=null;elemIcon.remove()}else{if(!ctrls[0]||ctrls[0].hasPermissions){scope.triggerhoverAnimation=triggerhoverAnimation;scope.setEditMode=setEditMode;editBox.append(elemIcon);$compile(elemIcon)(scope)}}}});if(!scope.readOnly&&!ctrls[0]||ctrls[0].hasPermissions){scope.triggerhoverAnimation=triggerhoverAnimation;scope.setEditMode=setEditMode}scope.functions={save:save,cancel:cancel};setupElements();scope.editMode={on:false};scope.showIcon=false;scope.showSpinner=false;function triggerhoverAnimation(leaving){if(!scope.editMode.on){var outerBox=element.children(\".editContainer\");if(outerBox!==null){outerBox=angular.element(outerBox);if(leaving){$animate.addClass(outerBox,\"edit-box\");$animate.removeClass(outerBox,\"box-border\");scope.showIcon=false}else{$animate.addClass(outerBox,\"box-border\");$animate.removeClass(outerBox,\"edit-box\");scope.showIcon=true}}}}function setEditMode(addMode){if(addMode&&_.isFunction(scope.addFn())){scope.addFn()}var outerBox=element.children(\".editContainer\");scope.editMode.on=true;$animate.removeClass(element,\"disabled\");$animate.addClass(outerBox,\"box-border\");$animate.removeClass(outerBox,\"edit-box\")}function save(){var form=$(\"#\"+scope.formName);if(!form||!form.hasClass(\"ng-invalid\")){if(_.isFunction(scope.saveFn)){scope.showSpinner=true;scope.saveFn(scope.unitToSave).then(function(){scope.showSpinner=false;scope.editMode.on=false;hideEditElements();if(ctrls[1]){ctrls[1].showMessage.success(\"\")(\"Save Successful\")}}).catch(function(){scope.showSpinner=false})}else{scope.editMode.on=false;hideEditElements()}}}function cancel(){scope.editMode.on=false;if(_.isFunction(scope.cancelFn)){scope.cancelFn()}hideEditElements()}function setupElements(){if(scope.addFn){editBox.after(addIcon);$compile(addIcon)(scope)}if(!ctrls[0]||ctrls[0].hasPermissions){editBox.append(elemIcon);editBox.after(saveSpinner);editBox.after(saveExitIcons)}editBox.addClass(\"edit-box\");element.addClass(\"disabled\");$compile(elemIcon)(scope);$compile(saveSpinner)(scope);$compile(saveExitIcons)(scope)}function hideEditElements(){triggerhoverAnimation(true);element.addClass(\"disabled\")}}}}]).directive(\"utilSpinner\",[function(){return{restrict:\"E\",template:'<span us-spinner=\"{radius:4, width:2, length: 2, lines: 9, scale: 1.5, corners: 1.0, speed: 2.0, hwaccel: true, trail: 100, className: className}\"></span>',scope:{className:\"@className\"}}}])})();"],"sourceRoot":"/source/"}