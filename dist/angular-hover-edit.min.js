!function(){"use strict";angular.module("angularHoverEdit",[]).directive("hoverEdit",["$animate","$compile",function(e,n){return{priority:100,restrict:"EA",require:["?hoverEditPermissions","?messageService"],scope:{saveFn:"=?saveFn",addFn:"=?addFn",cancelFn:"=?cancelFn",unitToSave:"=?unitToSave",editMode:"=?editMode",formName:"@formName",readOnly:"=?readOnly"},transclude:!0,template:'<div class="animated-element edit-container" ng-mouseover="(!editMode.on) ? triggerhoverAnimation(false) : \'\'" ng-mouseleave="(!editMode.on) ? triggerhoverAnimation(true) : \'\'" ng-click="setEditMode()"ng-transclude></div>',link:function(t,o,i,s){function a(){return _.isFunction(t.addFn)&&t.editMode.on}function r(n){if(!t.editMode.on){var i=o.children(".editContainer")[0];null!==i&&(i=angular.element(i),n?(e.addClass(i,"edit-box"),e.removeClass(i,"box-border"),t.showIcon=!1):(e.addClass(i,"box-border"),e.removeClass(i,"edit-box"),t.showIcon=!0))}}function d(n){n&&_.isFunction(t.addFn)&&t.addFn();var i=o.children(".editContainer");t.editMode.on=!0,e.removeClass(o,"disabled"),e.addClass(i,"box-border"),e.removeClass(i,"edit-box")}function l(){var e=angular.element(document.getElementById(t.formName));e&&e.hasClass("ng-invalid")||(_.isFunction(t.saveFn)?(t.showSpinner=!0,t.saveFn(t.unitToSave).then(function(){t.showSpinner=!1,t.editMode.on=!1,p(),s[1]&&s[1].showMessage.success("")("Save Successful")})["catch"](function(){t.showSpinner=!1})):(t.editMode.on=!1,p()))}function c(){t.editMode.on=!1,_.isFunction(t.cancelFn)&&t.cancelFn(),p()}function u(){b.after(v),n(v)(t),t.readOnly||s[0]&&!s[0].hasPermissions||(b.append(h),n(h)(t)),s[0]&&!s[0].hasPermissions||(b.after(g),b.after(m),n(g)(t),n(m)(t)),b.addClass("edit-box"),o.addClass("disabled")}function p(){r(!0),o.addClass("disabled")}var h=angular.element('<span class="top-rt-corner-box"><i class="lds-icon lds-icon-pencil"></i></span>'),m=angular.element('<div class="save-exit-btns"><button class="btn btn-danger-hover" ng-disabled="showSpinner" type="button" ng-show="editMode.on" ng-click="functions.cancel()" tooltip-popup-delay="500" tooltip-append-to-body="true" tooltip="Cancel Changes" style="float: right">CANCEL</button><button class="btn btn-success-hover" ng-disabled="showSpinner" type="submit" form="{{formName}}" ng-show="editMode.on" ng-click="functions.save()" tooltip-popup-delay="500" tooltip-append-to-body="true" tooltip="Save Changes" style="float: right;margin-right: 2px">SAVE</button></div>'),v=angular.element('<button class="margin-bot-5 btn btn-default add-btn add-restriction" type="button" ng-show="showAddIcon()" ng-click="setEditMode(true)" tooltip-popup-delay="500" tooltip-append-to-body="true" tooltip="Add Restriction"><i class="lds-icon lds-icon-add"></i> </button>'),g=angular.element('<div class="hover-edit-spinner" ng-show="showSpinner"><util-spinner></util-spinner></div>'),b=o.children(".editContainer");t.cancelClick=function(e){},t.$watch("readOnly",function(e,o){e!=o&&(e?(t.triggerhoverAnimation=null,t.setEditMode=null,h.remove()):s[0]&&!s[0].hasPermissions||(t.triggerhoverAnimation=r,t.setEditMode=d,b.append(h),n(h)(t)))}),t.readOnly||s[0]&&!s[0].hasPermissions||(t.triggerhoverAnimation=r,t.setEditMode=d),t.functions={save:l,cancel:c},u(),t.editMode={on:!1},t.showIcon=!1,t.showSpinner=!1,t.showAddIcon=a}}}]).directive("utilSpinner",[function(){return{restrict:"E",template:'<span us-spinner="{radius:4, width:2, length: 2, lines: 9, scale: 1.5, corners: 1.0, speed: 2.0, hwaccel: true, trail: 100, className: className}"></span>',scope:{className:"@className"}}}]).directive("hoverEditLink",[function(){return{restrict:"EA",template:'<span class="hover-edit-link" ng-click="hoverEditLink.handleLinkAction($event)" ng-transclude></span>',transclude:!0,scope:{link:"@?link",queryParams:"=?queryParams",onClick:"&?onClick"},bindToController:!0,controllerAs:"hoverEditLink",controller:["$location","$rootScope",function(e,n){var t=this;t.handleLinkAction=function(n){n.stopPropagation(),t.onClick?t.onClick():e.path(t.link).search(t.queryParams)}}]}}])}();
//# sourceMappingURL=angular-hover-edit.min.js.map
